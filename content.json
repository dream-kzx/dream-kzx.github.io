{"meta":{"title":"lookupmançš„åšå®¢","subtitle":"","description":"","author":"lookupman","url":"https://lookupman.cn","root":"/"},"pages":[{"title":"C++","date":"2020-06-08T10:40:24.000Z","updated":"2020-06-08T10:41:02.802Z","comments":true,"path":"C/index.html","permalink":"https://lookupman.cn/C/index.html","excerpt":"","text":""},{"title":"C++","date":"2020-06-08T10:41:08.000Z","updated":"2020-06-08T10:41:30.410Z","comments":true,"path":"C/index-1.html","permalink":"https://lookupman.cn/C/index-1.html","excerpt":"","text":""},{"title":"Nginx","date":"2020-10-18T09:26:46.000Z","updated":"2020-10-18T09:27:02.203Z","comments":true,"path":"Nginx/index.html","permalink":"https://lookupman.cn/Nginx/index.html","excerpt":"","text":""},{"title":"","date":"2019-09-09T10:52:09.000Z","updated":"2020-06-08T13:56:53.518Z","comments":true,"path":"friend/index.html","permalink":"https://lookupman.cn/friend/index.html","excerpt":"","text":"ç”³è¯·å‹é“¾é¡»çŸ¥ åŸåˆ™ä¸Šåªå’ŒæŠ€æœ¯ç±»åšå®¢äº¤æ¢ï¼Œä½†ä¸åŒ…æ‹¬å«æœ‰å’Œè‰²æƒ…ã€æš´åŠ›ã€æ”¿æ²»æ•æ„Ÿçš„ç½‘ç«™ã€‚ ä¸å’Œå‰½çªƒã€ä¾µæƒã€æ— è¯šä¿¡çš„ç½‘ç«™äº¤æ¢ï¼Œä¼˜å…ˆå’Œå…·æœ‰åŸåˆ›ä½œå“çš„ç½‘ç«™äº¤æ¢ã€‚ ç”³è¯·è¯·æä¾›ï¼šç«™ç‚¹åç§°ã€ç«™ç‚¹é“¾æ¥ã€ç«™ç‚¹æè¿°ã€logoæˆ–å¤´åƒï¼ˆä¸è¦è®¾ç½®é˜²ç›—é“¾ï¼‰ã€‚ æ’åä¸åˆ†å…ˆåï¼Œåˆ·æ–°åé‡æ’ï¼Œæ›´æ–°ä¿¡æ¯åè¯·ç•™è¨€å‘ŠçŸ¥ã€‚ æœ¬ç«™ä¸å­˜å‚¨å‹é“¾å›¾ç‰‡ï¼Œå¦‚æœå‹é“¾å›¾ç‰‡æ¢äº†æ— æ³•æ›´æ–°ã€‚å›¾ç‰‡è£‚äº†çš„ä¼šæ›¿æ¢æˆé»˜è®¤å›¾ï¼Œéœ€è¦æ›´æ¢çš„è¯·ç•™è¨€å‘ŠçŸ¥ã€‚ æœ¬ç«™å‹é“¾ä¿¡æ¯å¦‚ä¸‹ï¼Œç”³è¯·å‹é“¾å‰è¯·å…ˆæ·»åŠ æœ¬ç«™ä¿¡æ¯ï¼š ç½‘ç«™å›¾æ ‡ï¼šhttps://cdn.jsdelivr.net/gh/dream-kzx/blog_image/img/avatar.jpg ç½‘ç«™åç§°ï¼šlookupmançš„åšå®¢ ç½‘ç«™åœ°å€ï¼šhttps://lookupman.cn ç½‘ç«™ç®€ä»‹ï¼šåç«¯å¼€å‘ã€è®°å½•æˆé•¿ã€åˆ†äº«ç”Ÿæ´» åŠ è½½ä¸­ï¼Œç¨ç­‰å‡ ç§’..."},{"title":"å…³äº","date":"2020-11-08T12:14:24.296Z","updated":"2020-11-08T12:14:24.296Z","comments":false,"path":"about/index.html","permalink":"https://lookupman.cn/about/index.html","excerpt":"","text":"ä¸ªäººè¯¦ç»†ä»‹ç»"},{"title":"","date":"2019-07-29T08:28:26.000Z","updated":"2020-06-07T09:20:59.847Z","comments":true,"path":"album/index.html","permalink":"https://lookupman.cn/album/index.html","excerpt":"","text":"å›¾ç‰‡æœé›†äºäº’è”ç½‘ï¼Œä¾µæƒè¯·ç•™è¨€ï¼Œé©¬ä¸Šå¤„ç†ğŸ˜Šã€‚"},{"title":"","date":"2018-11-11T00:24:49.000Z","updated":"2020-06-07T10:42:51.523Z","comments":true,"path":"message/index.html","permalink":"https://lookupman.cn/message/index.html","excerpt":"","text":"ç•…æ‰€æ¬²è¨€ï¼Œæœ‰ç•™å¿…åº”"},{"title":"","date":"2019-07-30T01:33:48.000Z","updated":"2020-06-07T08:24:31.269Z","comments":true,"path":"media/index.html","permalink":"https://lookupman.cn/media/index.html","excerpt":"","text":"&nbsp;&nbsp;å¬å¬éŸ³ä¹ éŸ³ä¹æ’­æ”¾å™¨ç”±mePlayeræä¾›ï¼Œå¸ƒå±€å‚ç…§ç½‘å‹åšå®¢æ‰€ä½œï¼Œæ„Ÿè°¢ä½œè€…çš„è¾›å‹¤ä»˜å‡ºã€‚æ›´å¤šéŸ³ä¹åˆ†äº«è¯·æŸ¥çœ‹æ­Œå•ã€‚ &nbsp;&nbsp;çœ‹çœ‹è§†é¢‘ ->ç‚¹å‡»ä»¥ä¸‹æ¡ç›®å¼€å§‹æ’­æ”¾è§†é¢‘,å‘ä¸‹æ»‘åŠ¨æŸ¥çœ‹æ›´å¤š"},{"title":"éŸ³ä¹æ­Œå•æ”¶è—","date":"2019-07-30T02:43:45.000Z","updated":"2020-06-06T06:15:46.411Z","comments":true,"path":"music/index.html","permalink":"https://lookupman.cn/music/index.html","excerpt":"","text":"--- æ¸©é¦¨æç¤ºï¼šé€‰æ‹©å–œæ¬¢çš„éŸ³ä¹åŒå‡»æ’­æ”¾ï¼Œç”±äºç‰ˆæƒåŸå› éƒ¨åˆ†ä¸èƒ½æ’­æ”¾ã€‚å¦‚æœå–œæ¬¢æ­Œå•æ”¶è—ä¸€ä¸‹ï¼Œå»ç½‘æ˜“äº‘éƒ½èƒ½æ’­æ”¾å“Ÿï¼"},{"title":"åŒ…ç®¡ç†å·¥å…·","date":"2020-06-08T10:43:10.000Z","updated":"2020-06-08T10:43:21.089Z","comments":true,"path":"åŒ…ç®¡ç†å·¥å…·/index.html","permalink":"https://lookupman.cn/%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/index.html","excerpt":"","text":""},{"title":"","date":"2019-11-25T06:49:08.000Z","updated":"2020-06-07T14:41:45.927Z","comments":false,"path":"self-talking/index.html","permalink":"https://lookupman.cn/self-talking/index.html","excerpt":"","text":"æ—¥å¸¸åŠ¨æ€å’Œæ„Ÿæƒ³ tipsï¼šgithubç™»å½•åæŒ‰æ—¶é—´æ­£åºæŸ¥çœ‹ã€å¯ç‚¹èµåŠ â¤ï¸ã€æœ¬æ’ä»¶åœ°å€..ã€Œ+99æ¬¡æŸ¥çœ‹ã€ ç¢ç¢å¿µåŠ è½½ä¸­ï¼Œè¯·ç¨ç­‰... $.getScript(\"/js/gitalk_self.min.js\", function () { var gitalk = new Gitalk({ clientID: '46f4ecc2bac37d9774b3', clientSecret: '2e3bfb7189e25c4ab26daaa672dc5fe3c76f3c37', id: '8888', repo: 'everyday_issues', owner: 'dream-kzx', admin: \"dream-kzx\", createIssueManually: true, distractionFreeMode: false }); gitalk.render('comment-container1'); });"},{"title":"ç”Ÿæ´»","date":"2020-06-07T03:39:32.000Z","updated":"2020-06-07T07:05:08.288Z","comments":true,"path":"ç”Ÿæ´»/index.html","permalink":"https://lookupman.cn/%E7%94%9F%E6%B4%BB/index.html","excerpt":"","text":""},{"title":"æˆé•¿","date":"2020-06-07T06:59:41.000Z","updated":"2020-10-18T09:27:05.294Z","comments":true,"path":"æˆé•¿/index.html","permalink":"https://lookupman.cn/%E6%88%90%E9%95%BF/index.html","excerpt":"","text":""},{"title":"æ ‡ç­¾","date":"2020-11-08T09:55:18.325Z","updated":"2020-11-08T09:55:18.325Z","comments":false,"path":"tags/index.html","permalink":"https://lookupman.cn/tags/index.html","excerpt":"","text":""},{"title":"404 Not Foundï¼šè¯¥é¡µæ— æ³•æ˜¾ç¤º","date":"2020-11-08T09:55:18.319Z","updated":"2020-11-08T09:55:18.319Z","comments":false,"path":"/404.html","permalink":"https://lookupman.cn/404.html","excerpt":"","text":""},{"title":"ä¹¦å•","date":"2020-11-08T09:55:18.322Z","updated":"2020-11-08T09:55:18.322Z","comments":false,"path":"books/index.html","permalink":"https://lookupman.cn/books/index.html","excerpt":"","text":""},{"title":"åˆ†ç±»","date":"2020-11-08T09:55:18.323Z","updated":"2020-11-08T09:55:18.323Z","comments":false,"path":"categories/index.html","permalink":"https://lookupman.cn/categories/index.html","excerpt":"","text":""},{"title":"å‹æƒ…é“¾æ¥","date":"2020-11-08T11:56:37.901Z","updated":"2020-11-08T11:56:37.901Z","comments":true,"path":"links/index.html","permalink":"https://lookupman.cn/links/index.html","excerpt":"","text":""},{"title":"Repositories","date":"2020-11-08T09:55:18.324Z","updated":"2020-11-08T09:55:18.324Z","comments":false,"path":"repository/index.html","permalink":"https://lookupman.cn/repository/index.html","excerpt":"","text":""},{"title":"Golang","date":"2020-11-08T13:09:23.000Z","updated":"2020-11-08T13:23:39.401Z","comments":true,"path":"Golang/index.html","permalink":"https://lookupman.cn/Golang/index.html","excerpt":"","text":""}],"posts":[{"title":"gormå­¦ä¹ è®°å½•","slug":"gormå­¦ä¹ è®°å½•","date":"2020-11-08T08:29:08.000Z","updated":"2020-11-08T13:26:32.073Z","comments":true,"path":"2020/11/08/gormå­¦ä¹ è®°å½•/","link":"","permalink":"https://lookupman.cn/2020/11/08/gorm%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/","excerpt":"","text":"å‚è€ƒæ–‡ç« :å‚è€ƒé“¾æ¥","categories":[{"name":"Golang","slug":"Golang","permalink":"https://lookupman.cn/categories/Golang/"}],"tags":[]},{"title":"ioutilä¸€äº›æ–¹ä¾¿çš„æ“ä½œå‡½æ•°é›†","slug":"ioutilä¸€äº›æ–¹ä¾¿çš„æ“ä½œå‡½æ•°é›†","date":"2020-10-26T14:31:41.000Z","updated":"2020-11-08T13:24:03.759Z","comments":true,"path":"2020/10/26/ioutilä¸€äº›æ–¹ä¾¿çš„æ“ä½œå‡½æ•°é›†/","link":"","permalink":"https://lookupman.cn/2020/10/26/ioutil%E4%B8%80%E4%BA%9B%E6%96%B9%E4%BE%BF%E7%9A%84%E6%93%8D%E4%BD%9C%E5%87%BD%E6%95%B0%E9%9B%86/","excerpt":"","text":"1. NopCloserå‡½æ•°&emsp;&emsp;è¯¥å‡½æ•°æ˜¯å°†ä¸€ä¸ªio.Readeræ¥å£åŒ…è£…æˆä¸€ä¸ªio.ReadCloseræ¥å£ï¼Œå…¶ä¸­åŒ…è£…ç”Ÿæˆçš„Closeæ–¹æ³•ä»€ä¹ˆä¹Ÿä¸æ“ä½œã€‚å¯ä»¥åœ¨éœ€è¦å°†io.Readerä¼ å…¥io.ReadCloserå‚æ•°çš„å‡½æ•°çš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚ 1234567type nopCloser struct &#123; io.Reader&#125;func(nopCloser) Close() error &#123; return nil&#125; 2. ReadAllå‡½æ•°&emsp;&emsp;å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ä¸€æ¬¡æ€§è¯»å– io.Reader ä¸­çš„æ•°æ®ï¼Œé€šè¿‡ä¸Šä¸€èŠ‚çš„è®²è§£ï¼Œæˆ‘ä»¬çŸ¥é“æœ‰å¾ˆå¤šç§å®ç°æ–¹å¼ã€‚è€ƒè™‘åˆ°è¯»å–æ‰€æœ‰æ•°æ®çš„éœ€æ±‚æ¯”è¾ƒå¤šï¼ŒGo æä¾›äº† ReadAll è¿™ä¸ªå‡½æ•°ï¼Œç”¨æ¥ä»io.Reader ä¸­ä¸€æ¬¡è¯»å–æ‰€æœ‰æ•°æ®ã€‚ 1func ReadAll(r io.Reader) ([]byte, error) &emsp;&emsp;é˜…è¯»è¯¥å‡½æ•°çš„æºç å‘ç°ï¼Œå®ƒæ˜¯é€šè¿‡ bytes.Buffer ä¸­çš„ ReadFrom æ¥å®ç°è¯»å–æ‰€æœ‰æ•°æ®çš„ã€‚è¯¥å‡½æ•°æˆåŠŸè°ƒç”¨åä¼šè¿”å› err == nil è€Œä¸æ˜¯ err == EOFã€‚(æˆåŠŸè¯»å–å®Œæ¯•åº”è¯¥ä¸º err == io.EOFï¼Œè¿™é‡Œè¿”å› nil ç”±äºè¯¥å‡½æ•°æˆåŠŸæœŸæœ› err == io.EOFï¼Œç¬¦åˆæ— é”™è¯¯ä¸å¤„ç†çš„ç†å¿µ) å‚è€ƒæ–‡ç« :å‚è€ƒé“¾æ¥","categories":[{"name":"Golang","slug":"Golang","permalink":"https://lookupman.cn/categories/Golang/"}],"tags":[]},{"title":"GolangåŸºæœ¬è¾“å…¥è¾“å‡º(ioåŒ…æ¥å£)","slug":"GolangåŸºæœ¬è¾“å…¥è¾“å‡º(ioåŒ…æ¥å£)","date":"2020-10-25T08:22:58.000Z","updated":"2020-11-08T13:23:53.327Z","comments":true,"path":"2020/10/25/GolangåŸºæœ¬è¾“å…¥è¾“å‡º(ioåŒ…æ¥å£)/","link":"","permalink":"https://lookupman.cn/2020/10/25/Golang%E5%9F%BA%E6%9C%AC%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA(io%E5%8C%85%E6%8E%A5%E5%8F%A3)/","excerpt":"&emsp;&emsp;åœ¨æœ¬ç« çš„æ‰€æœ‰çš„ioæ¥å£æ—¶ï¼Œæœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œåœ¨è¯»å–æˆ–å†™å…¥çš„n=len(p)æ—¶ï¼Œè¿”å›çš„æ¥å£err=nilæˆ–è€…err=EOFï¼›å½“n&lt;len(p)æ—¶ï¼Œéœ€è¦è¿”å›errè§£é‡ŠåŸå› ã€‚","text":"&emsp;&emsp;åœ¨æœ¬ç« çš„æ‰€æœ‰çš„ioæ¥å£æ—¶ï¼Œæœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œåœ¨è¯»å–æˆ–å†™å…¥çš„n=len(p)æ—¶ï¼Œè¿”å›çš„æ¥å£err=nilæˆ–è€…err=EOFï¼›å½“n&lt;len(p)æ—¶ï¼Œéœ€è¦è¿”å›errè§£é‡ŠåŸå› ã€‚ 1. Readeræ¥å£&emsp;&emsp;åœ¨å®˜æ–¹ioåŒ…ä¸­å®šä¹‰äº†å¦‚ä¸‹æ¥å£ï¼Œåªè¦å®ç°äº†Readæ–¹æ³•ï¼Œå°±æ˜¯å°†å…¶ä¼ é€’ä¸ºio.Readerç±»å‹çš„å‚æ•° 123type Reader interface &#123; Read(p []byte)(n int, err error)&#125; 2. Writeræ¥å£&emsp;&emsp;åœ¨å®˜æ–¹çš„ioåŒ…ä¸­å®šä¹‰é‡Œå¦‚ä¸‹æ¥å£ï¼Œåªè¦å®ç°äº†Writeæ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯å®ç°äº†Writeræ¥å£ 123type Writer interface&#123; Write(p []byte)(n int, err error)&#125; 3. å®ç°Readerå’ŒWriteræ¥å£çš„ç±»å‹os.FileåŒæ—¶å®ç°äº†io.Readerå’Œio.Writeræ¥å£strings.Readerå®ç°äº†io.Readeræ¥å£bufio.Reader/Writeråˆ†åˆ«å®ç°äº†io.Readerå’Œio.Writeræ¥å£bytes.BufferåŒæ—¶å®ç°äº†io.Readerå’Œio.Writeræ¥å£bytes.Readerå®ç°äº†io.Readeræ¥å£compress/gzip.StreamReader/StreamWriteråˆ†åˆ«å®ç°äº†io.Readerå’Œio.Writeræ¥å£encoding/csv.Reader/Writeråˆ†åˆ«å®ç°äº†io.Readerå’Œio.Writeræ¥å£net/connåˆ†åˆ«å®ç°äº†io.Readerå’Œio.Writeræ¥å£(Connæ¥å£å®šä¹‰äº†Read/Write) 4. ReaderAtæ¥å£&emsp;&emsp;è¯¥æ¥å£æ˜¯ä»æºè¾“å…¥çš„åç§»é‡offå¤„è¯»å–len(p)ä¸ªå­—èŠ‚åˆ°pä¸­ã€‚ 123type ReaderAt struct &#123; ReadAt(p []byte, off int64)(n int, err error)&#125; 5. WriterAtæ¥å£&emsp;&emsp;è¯¥æ¥å£æ˜¯åœ¨æºè¾“å‡ºçš„åç§»é‡offå¤„å†™å…¥len(p)ä¸ªå­—èŠ‚ã€‚ 123type WriterAt struct &#123; WriteAt(p []byte, off int64)(n int, err error)&#125; 6. ReaderFromæ¥å£&emsp;&emsp;ReadFromä»rä¸­è¯»å–æ•°æ®ï¼Œç›´åˆ°EOFæˆ–å‘ç”Ÿé”™è¯¯ã€‚ 123type ReaderFrom struct &#123; ReadFrom(r Reader)(n int64, err error)&#125; ä½¿ç”¨ç¤ºä¾‹ 123456789file, err := os.Open(&quot;writerAt.txt&quot;)if err != nil&#123; painc(err)&#125;defer file.Close()writer := bufio.NewWriter(os.Stdout)writer.ReadFrom(file)writer.Flush() 7. WriterToæ¥å£&emsp;emsp;WriteTo å°†æ•°æ®å†™å…¥ w ä¸­ï¼Œç›´åˆ°æ²¡æœ‰æ•°æ®å¯å†™æˆ–å‘ç”Ÿé”™è¯¯ã€‚ 123type WriterTo struct&#123; WriteTo(w Writer)(n int, err error)&#125; 8. Seekeræ¥å£&emsp;&emsp;Seek è®¾ç½®ä¸‹ä¸€æ¬¡ Read æˆ– Write çš„åç§»é‡ä¸º offsetï¼Œå®ƒçš„è§£é‡Šå–å†³äº whenceï¼š 0 è¡¨ç¤ºç›¸å¯¹äºæ–‡ä»¶çš„èµ·å§‹å¤„ï¼Œ1 è¡¨ç¤ºç›¸å¯¹äºå½“å‰çš„åç§»ï¼Œè€Œ 2 è¡¨ç¤ºç›¸å¯¹äºå…¶ç»“å°¾å¤„ã€‚ Seek è¿”å›æ–°çš„åç§»é‡å’Œä¸€ä¸ªé”™è¯¯ï¼Œå¦‚æœæœ‰çš„è¯ã€‚ 123456789const( SeekStart = 0 SeekCurrent = 1 SeekEnd = 2)type Seeker struct&#123; Seek(offset int64, whence int)(ret int64, err error)&#125; 9. Closeræ¥å£æ¥å£å®šä¹‰å¦‚ä¸‹ï¼š 123type Closer interface&#123; Close() error&#125; 10. ByteReaderå’ŒByteWriteræ¥å£&emsp;&emsp;è¿™ä¸ªä¸¤ä¸ªæ¥å£ç”¨äºè¯»/å†™ä¸€ä¸ªå­—èŠ‚ 1234567type ByteReader interface&#123; ReadByte()(c byte, err error)&#125;type ByteWriter interface&#123; WriteByte(c byte) error&#125; åœ¨æ ‡å‡†åº“ä¸­ï¼Œæœ‰å¦‚ä¸‹ç±»å‹å®ç°äº† io.ByteReader æˆ– io.ByteWriter:bufio.Reader/Writer åˆ†åˆ«å®ç°äº†io.ByteReader å’Œ io.ByteWriterbytes.Buffer åŒæ—¶å®ç°äº† io.ByteReader å’Œ io.ByteWriterbytes.Reader å®ç°äº† io.ByteReaderstrings.Reader å®ç°äº† io.ByteReader 11. ByteScannerã€RuneReaderå’ŒRuneScanneræ¥å£&emsp;&emsp;UnreadByte æ–¹æ³•çš„æ„æ€æ˜¯ï¼šå°†ä¸Šä¸€æ¬¡ ReadByte çš„å­—èŠ‚è¿˜åŸï¼Œä½¿å¾—å†æ¬¡è°ƒç”¨ ReadByte è¿”å›çš„ç»“æœå’Œä¸Šä¸€æ¬¡è°ƒç”¨ç›¸åŒï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒUnreadByte æ˜¯é‡ç½®ä¸Šä¸€æ¬¡çš„ ReadByteã€‚æ³¨æ„ï¼ŒUnreadByte è°ƒç”¨ä¹‹å‰å¿…é¡»è°ƒç”¨äº† ReadByteï¼Œä¸”ä¸èƒ½è¿ç»­è°ƒç”¨ UnreadByteã€‚ 123456789101112131415type ByteScanner interface &#123; ByteReader UnreadByte() error&#125;//RuneReaderå’ŒByteReaderç±»ä¼¼type RuneReader interface &#123; ReadRune()(r rune, size int, err error)&#125;//RuneScannerå’ŒByteScannerç±»ä¼¼type RuneScanner interface &#123; RuneReader UnreadRune() error&#125; 12. SectionReaderæ¥å£&emsp;&emsp;NewSectionReader è¿”å›ä¸€ä¸ª SectionReaderï¼Œå®ƒä» r ä¸­çš„åç§»é‡ off å¤„è¯»å– n ä¸ªå­—èŠ‚åä»¥ EOF åœæ­¢ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒSectionReader åªæ˜¯å†…éƒ¨ï¼ˆå†…åµŒï¼‰ReaderAt è¡¨ç¤ºçš„æ•°æ®æµçš„ä¸€éƒ¨åˆ†ï¼šä» off å¼€å§‹åçš„ n ä¸ªå­—èŠ‚ã€‚è¿™ä¸ªç±»å‹çš„ä½œç”¨æ˜¯ï¼šæ–¹ä¾¿é‡å¤æ“ä½œæŸä¸€æ®µ (section) æ•°æ®æµï¼›æˆ–è€…åŒæ—¶éœ€è¦ ReadAt å’Œ Seek çš„åŠŸèƒ½ã€‚ 12345678910type SectionReader struct &#123; r ReaderAt base int64 //NewSectionReaderä¼šå°†baseè®¾ç½®ä¸ºoff off int64 //ä»rä¸­offåç§»å¤„å¼€å§‹è¯»å–æ•°æ® limit int64 //limit-off = SectionReaderæµçš„é•¿åº¦&#125;func NewSectionReader(r ReaderAt, off int64, n int64) *SectionReader &#123;&#125; LimitedReaderæ¥å£&emsp;&emsp;ä» R è¯»å–ä½†å°†è¿”å›çš„æ•°æ®é‡é™åˆ¶ä¸º N å­—èŠ‚ã€‚æ¯è°ƒç”¨ä¸€æ¬¡ Read éƒ½å°†æ›´æ–° N æ¥ååº”æ–°çš„å‰©ä½™æ•°é‡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæœ€å¤šåªèƒ½è¿”å› N å­—èŠ‚æ•°æ®ã€‚1234type LimitedReader struct &#123; R Reader //underlying reader,æœ€ç»ˆçš„è¯»å–é€šè¿‡R.Readå®Œæˆ N int64 //max bytes remaining&#125; &emsp;&emsp;ä½¿ç”¨ç¤ºä¾‹1234567891011content := &quot;This is LimitReader Example&quot;reader := strings.NewReader(content)limitReader := &amp;io.LimitedReader&#123;R:reader, N:8&#125;for limitReader.N &gt; 0&#123; tmp := make([]byte, 2) limitReader.Read(tmp) fmt.Printf(&quot;%s&quot;, tmp)&#125;//è¾“å‡ºï¼š This Is//ä»ç»“æœçœ‹ä¸€çœ‹å‡ºæœ€å¤šåªèƒ½è¯»å–Nä¸ªå­—ç¬¦ 14. PipeReaderå’ŒPipeWriteræ¥å£&emsp;&emsp;å…³äº PipeReader.Read æ–¹æ³•çš„è¯´æ˜ï¼šä»ç®¡é“ä¸­è¯»å–æ•°æ®ã€‚è¯¥æ–¹æ³•ä¼šå µå¡ï¼Œç›´åˆ°ç®¡é“å†™å…¥ç«¯å¼€å§‹å†™å…¥æ•°æ®æˆ–å†™å…¥ç«¯è¢«å…³é—­ã€‚å¦‚æœå†™å…¥ç«¯å…³é—­æ—¶å¸¦æœ‰ errorï¼ˆå³è°ƒç”¨ CloseWithError å…³é—­ï¼‰ï¼Œè¯¥Readè¿”å›çš„ err å°±æ˜¯å†™å…¥ç«¯ä¼ é€’çš„errorï¼›å¦åˆ™ err ä¸º EOFã€‚&emsp;&emsp;å…³äº PipeWriter.Write æ–¹æ³•çš„è¯´æ˜ï¼šå†™æ•°æ®åˆ°ç®¡é“ä¸­ã€‚è¯¥æ–¹æ³•ä¼šå µå¡ï¼Œç›´åˆ°ç®¡é“è¯»å–ç«¯è¯»å®Œæ‰€æœ‰æ•°æ®æˆ–è¯»å–ç«¯è¢«å…³é—­ã€‚å¦‚æœè¯»å–ç«¯å…³é—­æ—¶å¸¦æœ‰ errorï¼ˆå³è°ƒç”¨ CloseWithError å…³é—­ï¼‰ï¼Œè¯¥Writeè¿”å›çš„ err å°±æ˜¯è¯»å–ç«¯ä¼ é€’çš„errorï¼›å¦åˆ™ err ä¸º ErrClosedPipeã€‚ 1234567type PipeReader struct &#123; p *pipe&#125;type PipeWriter struct&#123; p *pipe&#125; &emsp;&emsp;ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ 123456789101112131415161718192021222324252627282930313233func main() &#123; pipeReader, pipeWriter := io.Pipe() go PipeWrite(pipeWriter) go PipeRead(pipeReader) time.Sleep(30 * time.Second)&#125;func PipeWrite(writer *io.PipeWriter)&#123; data := []byte(&quot;hello world!&quot;) for i := 0; i &lt; 3; i++&#123; n, err := writer.Write(data) if err != nil&#123; fmt.Println(err) return &#125; fmt.Printf(&quot;å†™å…¥å­—èŠ‚%d\\n&quot;, n) &#125; writer.CloseWithError(errors.New(&quot;å†™å…¥æ®µå·²ç»å…³é—­ï¼&quot;))&#125;func PipeRead(reader *io.PipeReader)&#123; buf := make([]byte, 128) for&#123; fmt.Println(&quot;æ¥å£å¼€å§‹æµ‹è¯•....&quot;) time.Sleep(5*time.Second) n, err := reader.Read(buf) if err != nil&#123; fmt.Println(err) return &#125; fmt.Printf(&quot;æ”¶åˆ°%dä¸ªå­—èŠ‚ï¼Œæ•°æ®ä¸ºï¼š%s\\n&quot;, n, buf) &#125;&#125; 15. Copyå’ŒCopyNå‡½æ•°&emsp;&emsp;Copy å°† src å¤åˆ¶åˆ° dstï¼Œç›´åˆ°åœ¨ src ä¸Šåˆ°è¾¾ EOF æˆ–å‘ç”Ÿé”™è¯¯ã€‚å®ƒè¿”å›å¤åˆ¶çš„å­—èŠ‚æ•°ï¼Œå¦‚æœæœ‰é”™è¯¯çš„è¯ï¼Œè¿˜ä¼šè¿”å›åœ¨å¤åˆ¶æ—¶é‡åˆ°çš„ç¬¬ä¸€ä¸ªé”™è¯¯ã€‚æˆåŠŸçš„ Copy è¿”å› err == nilï¼Œè€Œé err == EOFã€‚ç”±äº Copy è¢«å®šä¹‰ä¸ºä» src è¯»å–ç›´åˆ° EOF ä¸ºæ­¢ï¼Œå› æ­¤å®ƒä¸ä¼šå°†æ¥è‡ª Read çš„ EOF å½“åšé”™è¯¯æ¥æŠ¥å‘Šã€‚&emsp;&emsp;è‹¥ dst å®ç°äº† ReaderFrom æ¥å£ï¼Œå…¶å¤åˆ¶æ“ä½œå¯é€šè¿‡è°ƒç”¨ dst.ReadFrom(src) å®ç°ã€‚æ­¤å¤–ï¼Œè‹¥ src å®ç°äº† WriterTo æ¥å£ï¼Œå…¶å¤åˆ¶æ“ä½œå¯é€šè¿‡è°ƒç”¨ src.WriteTo(dst) å®ç°ã€‚ 1func Copy(dst Writer, src Reader)(written int64, err error)&#123;&#125; &emsp;&emsp;CopyN å°† n ä¸ªå­—èŠ‚(æˆ–åˆ°ä¸€ä¸ªerror)ä» src å¤åˆ¶åˆ° dstã€‚ å®ƒè¿”å›å¤åˆ¶çš„å­—èŠ‚æ•°ä»¥åŠåœ¨å¤åˆ¶æ—¶é‡åˆ°çš„æœ€æ—©çš„é”™è¯¯ã€‚å½“ä¸”ä»…å½“err == nilæ—¶,written == n ã€‚&emsp;&emsp;è‹¥ dst å®ç°äº† ReaderFrom æ¥å£ï¼Œå¤åˆ¶æ“ä½œä¹Ÿå°±ä¼šä½¿ç”¨å®ƒæ¥å®ç°ã€‚ 1func CopyN(dst Writer, src Reader, n int64)(written int64, err error)&#123;&#125; 16. ReadAtLeastå’ŒReadFullå‡½æ•°&emsp;&emsp;ReadAtLeast å°† r è¯»å–åˆ° buf ä¸­ï¼Œç›´åˆ°è¯»äº†æœ€å°‘ min ä¸ªå­—èŠ‚ä¸ºæ­¢ã€‚å®ƒè¿”å›å¤åˆ¶çš„å­—èŠ‚æ•°ï¼Œå¦‚æœè¯»å–çš„å­—èŠ‚è¾ƒå°‘ï¼Œè¿˜ä¼šè¿”å›ä¸€ä¸ªé”™è¯¯ã€‚è‹¥æ²¡æœ‰è¯»å–åˆ°å­—èŠ‚ï¼Œé”™è¯¯å°±åªæ˜¯ EOFã€‚å¦‚æœä¸€ä¸ªEOF å‘ç”Ÿåœ¨è¯»å–äº†å°‘äºminä¸ªå­—èŠ‚ä¹‹åï¼ŒReadAtLeastå°±ä¼šè¿”å›ErrUnexpectedEOFã€‚è‹¥ min å¤§äº buf çš„é•¿åº¦ï¼ŒReadAtLeast å°±ä¼šè¿”å›ErrShortBufferã€‚å¯¹äºè¿”å›å€¼ï¼Œå½“ä¸”ä»…å½“ err == nil æ—¶ï¼Œæ‰æœ‰ n &gt;= minã€‚ 1func ReadAtLeast(r Reader, buf []byte, min int)(n int, err error)&#123;&#125; &emsp;&emsp;ReadFull ç²¾ç¡®åœ°ä» r ä¸­å°† len(buf) ä¸ªå­—èŠ‚è¯»å–åˆ° buf ä¸­ã€‚å®ƒè¿”å›å¤åˆ¶çš„å­—èŠ‚æ•°ï¼Œå¦‚æœè¯»å–çš„å­—èŠ‚è¾ƒå°‘ï¼Œè¿˜ä¼šè¿”å›ä¸€ä¸ªé”™è¯¯ã€‚è‹¥æ²¡æœ‰è¯»å–åˆ°å­—èŠ‚ï¼Œé”™è¯¯å°±åªæ˜¯ EOFã€‚å¦‚æœä¸€ä¸ª EOF å‘ç”Ÿåœ¨è¯»å–äº†ä¸€äº›ä½†ä¸æ˜¯æ‰€æœ‰çš„å­—èŠ‚åï¼ŒReadFull å°±ä¼šè¿”å› ErrUnexpectedEOFã€‚å¯¹äºè¿”å›å€¼ï¼Œå½“ä¸”ä»…å½“ err == nil æ—¶ï¼Œæ‰æœ‰ n == len(buf)ã€‚ 1func ReadFull(r Reader, buf []byte)(n int, err error) 17. WriteStringå‡½æ•°&emsp;&emsp;WriteString å°†sçš„å†…å®¹å†™å…¥wä¸­ï¼Œå½“ w å®ç°äº† WriteString æ–¹æ³•æ—¶ï¼Œä¼šç›´æ¥è°ƒç”¨è¯¥æ–¹æ³•ï¼Œå¦åˆ™æ‰§è¡Œ w.Write([]byte(s))ã€‚ 1func WriteString(w writer, s string)(n int, err error) 18. MultiReaderå’ŒMultiWriterå‡½æ•°12345678910type multiReader struct &#123; readers []Reader&#125;type multiWriter struct &#123; writers []Writer&#125;func MultiReader(readers ...Reader) Readerfunc MultiWriter(writers ...Writer) Writer ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314151617readers := []io.Reader&#123; strings.NewReader(&quot;from strings reader&quot;), bytes.NewBufferString(&quot;from bytes buffer&quot;),&#125;reader := io.MultiReader(readers...)data := make([]byte, 0, 128)buf := make([]byte, 10)for n, err := reader.Read(buf); err != io.EOF ; n, err = reader.Read(buf)&#123; if err != nil&#123; panic(err) &#125; data = append(data,buf[:n]...)&#125;fmt.Printf(&quot;%s\\n&quot;, data)//è¾“å‡º//from strings readerfrom bytes buffer 12345678910111213file, err := os.Create(&quot;tmp.txt&quot;)if err != nil &#123; panic(err)&#125;defer file.Close()writers := []io.Writer&#123; file, os.Stdout,&#125;writer := io.MultiWriter(writers...)writer.Write([]byte(&quot;Hello World!&quot;))//è¾“å‡ºï¼šæ§åˆ¶å°å’Œæ–‡ä»¶åŒæ—¶è¾“å‡ºHello World! å‚è€ƒæ–‡ç« :ã€ŠGoè¯­è¨€æ ‡å‡†åº“ã€‹","categories":[{"name":"Golang","slug":"Golang","permalink":"https://lookupman.cn/categories/Golang/"}],"tags":[]},{"title":"nginxå­¦ä¹ è®°å½•","slug":"nginxå­¦ä¹ è®°å½•","date":"2020-10-18T09:23:54.000Z","updated":"2020-10-18T09:23:54.000Z","comments":true,"path":"2020/10/18/nginxå­¦ä¹ è®°å½•/","link":"","permalink":"https://lookupman.cn/2020/10/18/nginx%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/","excerpt":"","text":"åŸºç¡€æ¶æ„&emsp;&emsp; 1.è¯·æ±‚æµç¨‹ ä¼˜ç‚¹ é«˜å¹¶å‘ï¼Œé«˜æ€§èƒ½ å¯æ‰©å±•æ€§è‰¯å¥½ é«˜å¯é æ€§ çƒ­éƒ¨ç½² BSDè®¸å¯è¯ â€“32æ ¸64Gï¼Œå¯æ”¯æŒåƒä¸‡å¹¶å‘ ç»„æˆï¼ˆ1ï¼‰NginxäºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆ2ï¼‰Nginxã€‚confé…ç½®æ–‡ä»¶ï¼ˆ3ï¼‰access.logè®¿é—®æ—¥å¿—ï¼ˆ4ï¼‰error.logé”™è¯¯æ—¥å¿— å†å²ç‰ˆæœ¬ ç¬¬ä¸‰æ–¹æ¨¡å—æ¡†æ¶OpenResty ç¼–è¯‘nginx ä¸‹è½½å®‰è£…nginx æºç ç›®å½• ç›®å½•è¯´æ˜â‘  auto ç”¨äºç¼–è¯‘ï¼Œå…¶ä¸­åŒ…å«äº†å››ä¸ªä¸»è¦ç›®å½•ï¼Œåˆ†åˆ«æ˜¯cc(ç”¨äºç¼–è¯‘)ã€libã€os(å¯¹ç¼–è¯‘æ“ä½œç³»ç»Ÿçš„åˆ¤æ–­)ã€typesâ‘¡ CHANGES: nginxçš„ç‰ˆæœ¬å˜åŒ–â‘¢ CHANGES.ru: ä¿„ç½—æ–¯ç‰ˆæœ¬â‘£ conf: ä¸€äº›ç¤ºä¾‹æ–‡ä»¶ï¼Œnginxå®‰è£…å¥½åä¸ºäº†æ–¹ä¾¿è¿ç»´å»é…ç½®ï¼Œä¼šæŠŠconfçš„ç¤ºä¾‹æ–‡ä»¶æ‹·è´åˆ°å®‰è£…ç›®å½•â‘¤ configure: è¯¥æ–‡ä»¶ç”¨äºç”Ÿæˆä¸­é—´æ–‡ä»¶ï¼Œæ‰§è¡Œç¼–è¯‘å‰çš„å¿…å¤‡åŠ¨ä½œâ‘¥ contrib: æä¾›2ä¸ªperlè„šæœ¬å’Œvimçš„å·¥å…·ï¼Œæ”¹å˜é…ç½®nginx.confçš„vimè¯­æ³•é…è‰² 1cp -r contrib/vim/* ~/.vim/ â‘¦ man: nginxå¸®åŠ©æ–‡ä»¶â‘§ src: æºä»£ç  ç¼–è¯‘ 1.&#x2F;configure --help | more &emsp;&emsp;å¦‚æœä¸éœ€è¦å˜åŠ¨ï¼Œç¼–è¯‘æ—¶åªéœ€è¦æŒ‡å®šâ€“prefixå‚æ•°å³å¯ï¼Œæ‰€æœ‰çš„æ–‡ä»¶ä¼šåœ¨prefixç›®å½•ä¸‹å»ºç›¸åº”çš„æ–‡ä»¶å¤¹&emsp;&emsp;â€“withå‰ç¼€çš„æ¨¡å—é»˜è®¤ä¸åŠ å…¥ç¼–è¯‘&emsp;&emsp;â€“withoutå‰ç¼€çš„æ¨¡å—é»˜è®¤åŠ å…¥ç¼–è¯‘ï¼Œæ‰§è¡Œè¯¥å‘½ä»¤è¡¨ç¤ºç§»é™¤ç¼–è¯‘ 123456789//å®‰è£…ä¾èµ–//è§£å†³zlib errorä¾èµ–é”™è¯¯sudo apt install zlib1g-dev//è§£å†³openssl errorä¾èµ–é”™è¯¯sudo apt install openssl libssl-dev//è§£å†³pcre errorä¾èµ–é”™è¯¯sudo apt install libpcre3 libpcre3-dev &emsp;&emsp;æ‰§è¡Œconfigureï¼Œä¼šç”Ÿæˆä¸­é—´æ–‡ä»¶åœ¨objsæ–‡ä»¶å¤¹ä¸‹ï¼Œå…¶ä¸­æœ€é‡è¦çš„æ˜¯ngx_modules.cï¼Œå®ƒå†³å®šäº†å“ªäº›æ¨¡å—å°†å‚ä¸ç¼–è¯‘ 1.&#x2F;configure --prefix &#x3D; ~&#x2F;home&#x2F;app&#x2F;nginx &emsp;&emsp;æ¥ä¸‹æ¥æ˜¯æ‰§è¡Œmakeç¼–è¯‘ï¼Œç›®æ ‡æ–‡ä»¶åœ¨objsç›®å½•â€œnginxâ€ï¼Œcç¼–è¯‘çš„ä¸­é—´æ–‡ä»¶åœ¨srcç›®å½• 1make &emsp;&emsp;æœ€åæ‰§è¡Œå®‰è£…å‘½ä»¤ï¼Œå®‰è£…åœ¨prefixæ‰§è¡Œçš„ç›®å½•ä¸­ 1make install nginxå‘½ä»¤è¡Œ12345678910&#x2F;&#x2F;ä½¿ç”¨æŒ‡å®šé…ç½®æ–‡ä»¶ -c&#x2F;&#x2F;ä½¿ç”¨é…ç½®æŒ‡ä»¤ -g&#x2F;&#x2F;æŒ‡å®šè¿è¡Œç›®å½• -p&#x2F;&#x2F;å‘é€ä¿¡å· -s&#x2F;&#x2F;&#x2F;&#x2F;stopï¼šç«‹å³åœæ­¢æœåŠ¡ (kill -TERM)&#x2F;&#x2F;&#x2F;&#x2F;quitï¼šä¼˜é›…çš„åœæ­¢æœåŠ¡ (kill -QUIT)&#x2F;&#x2F;&#x2F;&#x2F;reloadï¼šé‡è½½é…ç½®æ–‡ä»¶ (kill -SIGHUP)&#x2F;&#x2F;&#x2F;&#x2F;reopenï¼šé‡æ–°å¼€å§‹è®°å½•æ—¥å¿—æ–‡ä»¶ (kill -USR1)&#x2F;&#x2F;æµ‹è¯•é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯ -t -T&#x2F;&#x2F;æ‰“å°nginxçš„ç‰ˆæœ¬ä¿¡æ¯ã€ç¼–è¯‘ä¿¡æ¯ï¼š-v -V &emsp;&emsp;ä¿®æ”¹é…ç½®åï¼Œç›´æ¥nginx -s reloadå³å¯ï¼Œä¼šè‡ªåŠ¨åŠ è½½æ–°çš„é…ç½®ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä¼šé‡æ–°å¯åŠ¨ä¸€ä¸ªworkerè¿›è¡Œï¼Œå¹¶å°†ä¹‹å‰çš„workerè¿›ç¨‹ä¼˜é›…çš„é€€å‡º ä¼˜é›…å…³é—­&emsp;&emsp;ä¼˜é›…çš„å…³é—­åªé’ˆå¯¹httpåè®®å±‚ çƒ­éƒ¨ç½² éƒ¨ç½²æœ€æ–°ç‰ˆæœ¬çš„nginxï¼Œåªéœ€æ›¿æ¢nginxäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œé¦–å…ˆç”¨ps -ef | grep nginxï¼Œè§‚å¯Ÿè¿›ç¨‹çš„çŠ¶æ€ã€‚ï¼ˆæ³¨æ„åœ¨ç¼–è¯‘æ–°ç‰ˆæœ¬çš„nginxæ—¶ï¼Œä¸éœ€è¦æ‰§è¡Œmake installå‘½ä»¤ï¼Œå¦åˆ™ä¼šè¦†ç›–ä¹‹å‰çš„é…ç½®æ–‡ä»¶ï¼‰ ç„¶åå°†å®‰è£…ç›®å½•ä¸‹sbin/nginxï¼Œä¿®æ”¹ä¸ºnginx.old1mv nginx nginx.old ç„¶åå°†å…¶ä»–ç‰ˆæœ¬çš„nginxç§»åˆ°è¯¥ç›®å½•ä¸‹1cp ..&#x2F;openresty&#x2F;nginx&#x2F;sbin&#x2F;nginx .&#x2F; ç„¶ååƒnginxå‘é€ä¿¡å·(kill -USR2 79637)ï¼Œå…¶ä¼šå¯åŠ¨æ–°ç‰ˆæœ¬nginxè¿›ç¨‹1kill -USR2 79637 ç„¶åå‘è€çš„nginxè¿›ç¨‹å‘é€ä¸€ä¸ªä¿¡å·(kill -WINCH 79637)ï¼Œè®©å…¶ä¼˜é›…çš„å…³é—­workè¿›ç¨‹1kill -WINCH 79637 åœ¨è¿™ä¹‹åå¯ä»¥çœ‹åˆ°è€ç‰ˆæœ¬çš„nginxçš„workerè¿›ç¨‹å·²ç»å…³é—­ï¼Œè¿˜å‰©ä¸‹masterè¿›ç¨‹ï¼Œmasterè¿›ç¨‹æ˜¯ä¸ºäº†é˜²æ­¢æ–°éƒ¨ç½²çš„ç‰ˆæœ¬å‡ºç°é—®é¢˜ï¼Œå¯ä»¥åšç‰ˆæœ¬å›é€€çš„ä½œç”¨ç‰ˆæœ¬å›é€€ é¦–å…ˆé€šè¿‡ä¿¡å·ï¼Œkill -HUP 79637é‡æ–°æ‹‰èµ·æ—§ç‰ˆæœ¬çš„masterè¿›ç¨‹1kill -HUP 79637 ç„¶ååƒæ–°ç‰ˆæœ¬çš„nginxï¼Œå‘é€kill -WINCH 112586ä¿¡å·ä½¿å…¶ä¼˜é›…çš„å…³é—­workerè¿›ç¨‹1kill -WINCH 112586 æœ€åå…³é—­æ–°ç‰ˆæœ¬çš„nginx masterè¿›ç¨‹å³å¯1kill -9 112586 æ—¥å¿—åˆ‡å‰² é¦–å…ˆåˆ°logç›®å½•ä¸‹ï¼Œå°†ä¹‹å‰æ—¥å¿—è½¬ç§»åˆ°å¦ä¸€ä¸ªæ–‡ä»¶1mv access.log pre_access.log ç„¶ååœ¨nginxç›®å½•ä¸‹ï¼Œæ‰§è¡Œreopenå‘½ä»¤å³å¯ç”Ÿæˆæ–°çš„æ—¥å¿—æ–‡ä»¶1sudo nginx -s reopen Nginxä¿¡å·&emsp;&emsp;å…¶ä¸­masterè¿›ç¨‹ä¼šæ£€æµ‹workerè¿›ç¨‹ï¼Œå½“workerå¼‚å¸¸ç»ˆæ­¢æ—¶ï¼Œmasterè¿›ç¨‹ä¼šæ¥æ”¶åˆ°ä¸€ä¸ªCHLDä¿¡å·ã€‚ç„¶åmasterè¿›ç¨‹ä¼šé‡æ–°å°†workerè¿›ç¨‹æ‹‰èµ·ã€‚reloadæµç¨‹ï¼ˆæ³¨æ„é…ç½®worker_shutdown_timeoutï¼‰ ä½¿ç”¨Goaccessåˆ†ææ—¥å¿— ä½¿ç”¨aptå®‰è£…goaccess1sudo apt install goaccess ç„¶åæ‰§è¡Œä¸€ä¸‹å‘½ä»¤å³å¯ã€‚-o åˆ†ææ—¥å¿—ç½‘é¡µçš„ç”Ÿæˆè·¯å¾„ï¼Œå…¶ä½™å‚æ•°æŸ¥çœ‹å®˜ç½‘å¸®åŠ©æ–‡æ¡£ï¼Œå…¶ä¸­æ³¨æ„åœ¨nginxçš„æ—¥å¿—æ ¼å¼å˜åŒ–çš„æƒ…å†µä¸‹ï¼Œéœ€è¦ä¿®æ”¹â€“log-foramtå‚æ•°å¯¹åº”çš„å€¼1goaccess pre_access.log -o ..&#x2F;html&#x2F;report.html --real-time-html --time-format&#x3D;&#39;%H:%M:%S&#39; --date-format&#x3D;&#39;%d&#x2F;%b&#x2F;%Y&#39; --log-format&#x3D;COMBINED Nginxæ¨¡å—æ•°æ®ç»“æ„&emsp;&emsp;å…¶ä¸­ngx_module_tä¸­çš„typeå­—æ®µå®šä¹‰äº†nginxæ¨¡å—çš„ç±»å‹ å…±äº«å†…å­˜ä½¿ç”¨æ¨¡å— å‚è€ƒæ–‡ç«  æå®¢æ—¶é—´Nginxæ ¸å¿ƒçŸ¥è¯†100è®²","categories":[{"name":"Nginx","slug":"Nginx","permalink":"https://lookupman.cn/categories/Nginx/"}],"tags":[{"name":"æˆé•¿","slug":"æˆé•¿","permalink":"https://lookupman.cn/tags/%E6%88%90%E9%95%BF/"}]},{"title":"C++åŒ…ç®¡ç†å·¥å…·vcpkgçš„ä½¿ç”¨","slug":"C++åŒ…ç®¡ç†å·¥å…·vcpkgçš„ä½¿ç”¨","date":"2020-06-08T10:39:40.000Z","updated":"2020-06-08T20:07:50.000Z","comments":true,"path":"2020/06/08/C++åŒ…ç®¡ç†å·¥å…·vcpkgçš„ä½¿ç”¨/","link":"","permalink":"https://lookupman.cn/2020/06/08/C++%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7vcpkg%E7%9A%84%E4%BD%BF%E7%94%A8/","excerpt":"","text":"å‰è¨€&emsp;&emsp;æœ€è¿‘åœ¨ä½¿ç”¨c++æ—¶ï¼Œå‘ç°ç¼–è¯‘ç¬¬ä¸‰æ–¹åº“çœŸçš„çƒ¦ï¼ŒåŒæ—¶è¿˜è¦åœ¨vsçš„è®¾ç½®ä¸­å¼•å…¥åŒ…å«ç›®å½•ã€åº“ç›®å½•ï¼Œæ“ä½œèµ·æ¥ååˆ†ç¹çã€‚ä¹‹ågithubä¸Šæ‰¾åˆ°äº†vcpkgè¿™ä¸ªå¾®è½¯å¼€å‘çš„åŒ…ç®¡ç†å·¥å…·ï¼Œç”¨èµ·æ¥æŒºé¡ºæ‰‹çš„ï¼Œå°±æ˜¯ä¸‹è½½åŒ…çš„æ—¶å€™ï¼Œç”±äºåŒ…æœåŠ¡å™¨åœ¨å¤–ç½‘ï¼Œå¾ˆå¤šæ—¶å€™ä¼šå®‰è£…å¤±è´¥ï¼Œè¿™æ˜¯ä¸€ä¸ªè‹¦æ¼çš„é—®é¢˜ã€‚æœ€è¿‘ï¼Œåœ¨ä¸€ç‰‡åšå®¢çœ‹åˆ°æœ‰å¤§ä½¬æ­å»ºå›½å†…ä¸ªäººé•œåƒï¼Œæ²¡æœ‰æ¢¯å­çš„ï¼Œå¯ä»¥å»äº†è§£ä¸€ä¸‹ã€‚ å®‰è£…&emsp;&emsp;å®‰è£…å¾ˆç®€å•ï¼Œå¯ä»¥å‚è€ƒgithubæä¾›çš„README.mdã€‚ é¦–å…ˆç¬¬ä¸€æ­¥ä»vcpkgä»“åº“æŠŠä»£ç cloneä¸‹æ¥ï¼š12&gt; git clone git@github.com:microsoft&#x2F;vcpkg.git&gt; cd vcpkg ç„¶åç¬¬äºŒæ­¥ï¼Œä½¿ç”¨å‘½ä»¤ç¼–è¯‘vcpkg12&gt; .\\bootstrap-vcpkg.bat &#x2F;&#x2F;windowsä¸‹&gt; .&#x2F;bootstrap-vcpkg.sh &#x2F;&#x2F;Linuxä¸‹ ç¬¬ä¸‰æ­¥ï¼Œä¸ºäº†æ–¹ä¾¿æ“ä½œï¼Œå¯ä»¥å°†ç›®å½•ä¸‹ç”Ÿæˆçš„vcpkgå¯æ‰§è¡Œæ–‡ä»¶ï¼ŒåŠ å…¥åˆ°ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡ ç¬¬å››æ­¥ï¼Œä¸ºå…¨å±€é…ç½®vcpkg1&gt; vcpkg integrate install &emsp;&emsp;åœ¨è¿™ä¸€æ­¥ä¹‹åï¼Œåœ¨windowsä¸‹ï¼ŒVSä¸­ï¼Œå¯ä»¥ç›´æ¥åœ¨å¤´éƒ¨å¼•å…¥å®‰è£…çš„åº“ä½¿ç”¨ï¼Œä¸éœ€è¦å…¶ä»–åŒ…å«åº“ç›®å½•ç­‰æ“ä½œï¼Œååˆ†æ–¹ä¾¿ã€‚&emsp;&emsp;å¯¹äºä¸ä½¿ç”¨vsçš„æƒ…å†µï¼Œvcpkgå¯ä»¥åœ¨cmakeä¸­ä½¿ç”¨ï¼Œé€šè¿‡ç¼–è¯‘å‚æ•°-DCMAKE_TOOLCHAIN_FILE = [vcpkg root]\\scripts\\buildsystems\\vcpkg.cmakeï¼Œè¿›è¡Œé…ç½®ï¼Œå®ä¾‹å¦‚ä¸‹ï¼š12345678910111213141516171819cmake_minimum_required (VERSION 3.8)project(ManagerServer)set(CMAKE_CXX_STANDARD 14)#G:/c++ Depende/vcpkg, æ˜¯æˆ‘çš„vcpkgçš„æ ¹ç›®å½•ï¼Œåœ¨ä½¿ç”¨çš„æ—¶å€™éœ€è¦æ›´æ¢ä¸ºè‡ªå·±çš„set(VCPKG_ROOT &quot;G:/C++ Depende/vcpkg/scripts/buildsystems/vcpkg.cmake&quot; CACHE PATH &quot;&quot;)set(CMAKE_TOOLCHAIN_FILE $&#123;VCPKG_ROOT&#125;)#è¿™ä¸ªæ˜¯æŸ¥æ‰¾sqlite3åº“çš„æ“ä½œï¼Œ å®‰è£…sqlite3çš„æ“ä½œï¼Œè¯·çœ‹æ–‡ç« çš„ä¸‹ä¸€éƒ¨åˆ†find_package(sqlite3 CONFIG REQUIRED)aux_source_directory(. sourceList)# å°†æºä»£ç æ·»åŠ åˆ°æ­¤é¡¹ç›®çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚add_executable (ManagerServer $&#123;sourceList&#125;)#è¿›è¡Œsqlite3åº“çš„é“¾æ¥target_link_libraries(ManagerServer PRIVATE sqlite3) ä½¿ç”¨&emsp;&emsp;æ¥ä¸‹æ¥æ˜¯å…³äºvcpkgçš„ä½¿ç”¨ï¼Œæœ¬æ–‡ä»¥å®˜æ–¹æ–‡æ¡£æè¿°çš„å®‰è£…å’Œä½¿ç”¨sqlite3çš„ä¾‹å­æ¥ä»‹ç»ã€‚ é€šè¿‡searchå‚æ•°æ¥æŸ¥æ‰¾æä¾›çš„ç¬¬ä¸‰æ–¹åŒ… 1234567&gt; vcpkg search sqlite3dlib[sqlite3] sqlite3 support for dlibsoci[sqlite3] Build sqlite3 backendsqlite3 3.32.0-0 SQLite is a software library that implements a self-contained, serverless, zer...sqlite3[tool] sqlite3 executablesqlitecpp 3.0.0 SQLiteC++ (SQLiteCpp) is a smart and easy to use C++ SQLite3 wrapper.sqlpp11-connector... 0.29-2 A C++ wrapper for sqlite3 meant to be used in combination with sqlpp11. é€šè¿‡installå‘½ä»¤æ¥å®‰è£…åŒ…&emsp;&emsp;åœ¨å®‰è£…åŒ…ä¹‹å‰ï¼Œéœ€è¦æŸ¥çœ‹æœ¬æœºçš„VSç¯å¢ƒæ˜¯å¦å®‰è£…çš„Englishçš„è¯­è¨€åŒ…ï¼Œå¦åˆ™ï¼Œä¼šå‡ºç°è­¦å‘Šå’ŒæŠ¥é”™çš„é—®é¢˜ã€‚æ¥ä¸‹æ¥ï¼Œæ˜¯ä½¿ç”¨installå®‰è£…ç¬¬ä¸‰æ–¹åŒ…ï¼Œç¤ºä¾‹çš„ç¯å¢ƒæ˜¯windows10ã€‚ 123456789101112131415161718192021222324252627&gt; vcpkg install sqlite3Computing installation plan...The following packages will be built and installed: sqlite3[core]:x86-windowsStarting package 1/1: sqlite3:x86-windowsBuilding package sqlite3[core]:x86-windows...-- Using cached G:/C++ Depende/vcpkg/downloads/sqlite-amalgamation-3320000.zip-- Using source at G:/C++ Depende/vcpkg/buildtrees/sqlite3/src/3320000-f17e2f22e8-- Configuring x86-windows-- Building x86-windows-dbg-- Building x86-windows-rel-- Performing post-build validation-- Performing post-build validation doneBuilding package sqlite3[core]:x86-windows... doneInstalling package sqlite3[core]:x86-windows...Installing package sqlite3[core]:x86-windows... doneElapsed time for package sqlite3:x86-windows: 11.25 sTotal elapsed time: 11.25 sThe package sqlite3:x86-windows provides CMake targets: find_package(sqlite3 CONFIG REQUIRED) target_link_libraries(main PRIVATE sqlite3)//åœ¨windowsä¸‹å‘½ä»¤é»˜è®¤ç¼–è¯‘çš„æ˜¯x86çš„åŒ…ï¼Œå¯ä»¥é€šè¿‡&quot;:&quot;æŒ‡å®šï¼Œæ¯”å¦‚ï¼š&gt; vcpkg install sqlite3:x64-windows &emsp;&emsp;åœ¨å®Œæˆå®‰è£…åï¼Œå¯ä»¥çœ‹å‡ºå‘½ä»¤è¡Œè¾“å‡ºäº†ï¼Œåœ¨camkeä¸­çš„ä½¿ç”¨è¯­å¥ï¼Œå°†å…¶å†™å…¥CMakeLists.txtå°±å¯ä»¥äº†ï¼Œç‰¹åˆ«è¦æ³¨æ„target_link_libraries(main PRIVATE sqlite3)add_executable()åé¢ã€‚ åˆ©ç”¨listå‚æ•°ï¼ŒæŸ¥çœ‹å·²ç»ç¼–è¯‘å®‰è£…çš„åŒ… 123&gt; vcpkg listsqlite3:x64-windows 3.32.0-0 SQLite is a software library that implements a s...sqlite3:x86-windows 3.32.0-0 SQLite is a software library that implements a s... åˆ©ç”¨removeå‚æ•°ï¼Œå¸è½½å·²ç»ç¼–è¯‘å®‰è£…çš„åŒ… 1&gt; vcpkg remove [package_name] ä½¿ç”¨å®ä¾‹ main.cppæ–‡ä»¶12345678910111213141516171819202122232425262728293031// main.cpp#include &lt;errno.h&gt;#include &lt;sqlite3.h&gt;#include &lt;stdio.h&gt;int main() &#123; sqlite3 *pdb = nullptr; int result; result = sqlite3_open(&quot;test.db&quot;, &amp;pdb); if (result != SQLITE_OK) &#123; perror(&quot;sqlite_open error!&quot;); return -1; &#125; sqlite3_stmt *pStmt; const char *sql = &quot;create table Student(&quot; &quot;t_id, integer primary key, &quot; &quot;t_name varchar(15), t_age integer)&quot;; char *errMsg = NULL; result = sqlite3_exec(pdb, sql, NULL, NULL, &amp;errMsg); if (result != SQLITE_OK) &#123; printf(&quot;create table student failed!\\n&quot;); printf(&quot;error conde %d \\t error message:%s\\n&quot;, result, errMsg); &#125; printf(&quot;create table success!\\n&quot;); return 0;&#125; CMakeLists.txtæ–‡ä»¶1234567891011121314151617#CMakeLists.txtcmake_minimum_required (VERSION 3.8)project(ManagerServer)set(CMAKE_CXX_STANDARD 14)set(VCPKG_ROOT &quot;G:/C++ Depende/vcpkg/scripts/buildsystems/vcpkg.cmake&quot; CACHE PATH &quot;&quot;)set(CMAKE_TOOLCHAIN_FILE $&#123;VCPKG_ROOT&#125;)find_package(sqlite3 CONFIG REQUIRED)aux_source_directory(. sourceList)# å°†æºä»£ç æ·»åŠ åˆ°æ­¤é¡¹ç›®çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚add_executable (ManagerServer $&#123;sourceList&#125;)target_link_libraries(ManagerServer PRIVATE sqlite3) å‚è€ƒæ–‡ç«  vcpkgå›½å†…é•œåƒä½¿ç”¨æ–¹æ³•","categories":[{"name":"C++","slug":"C","permalink":"https://lookupman.cn/categories/C/"}],"tags":[{"name":"C++","slug":"C","permalink":"https://lookupman.cn/tags/C/"},{"name":"åŒ…ç®¡ç†å·¥å…·","slug":"åŒ…ç®¡ç†å·¥å…·","permalink":"https://lookupman.cn/tags/%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/"}]},{"title":"æ–°çš„å¼€å§‹","slug":"æ–°çš„å¼€å§‹","date":"2020-06-07T03:07:59.000Z","updated":"2020-06-07T14:07:50.000Z","comments":true,"path":"2020/06/07/æ–°çš„å¼€å§‹/","link":"","permalink":"https://lookupman.cn/2020/06/07/%E6%96%B0%E7%9A%84%E5%BC%80%E5%A7%8B/","excerpt":"","text":"è¦å¼€å§‹å†™åšå®¢äº†ï¼Œä¸ç„¶å¾ˆå¤šä¸œè¥¿ï¼Œå¥½ä¹…æ²¡ç”¨äº†å°±å¿˜äº†","categories":[{"name":"ç”Ÿæ´»","slug":"ç”Ÿæ´»","permalink":"https://lookupman.cn/categories/%E7%94%9F%E6%B4%BB/"}],"tags":[{"name":"æˆé•¿","slug":"æˆé•¿","permalink":"https://lookupman.cn/tags/%E6%88%90%E9%95%BF/"}]}],"categories":[{"name":"Golang","slug":"Golang","permalink":"https://lookupman.cn/categories/Golang/"},{"name":"Nginx","slug":"Nginx","permalink":"https://lookupman.cn/categories/Nginx/"},{"name":"C++","slug":"C","permalink":"https://lookupman.cn/categories/C/"},{"name":"ç”Ÿæ´»","slug":"ç”Ÿæ´»","permalink":"https://lookupman.cn/categories/%E7%94%9F%E6%B4%BB/"}],"tags":[{"name":"æˆé•¿","slug":"æˆé•¿","permalink":"https://lookupman.cn/tags/%E6%88%90%E9%95%BF/"},{"name":"C++","slug":"C","permalink":"https://lookupman.cn/tags/C/"},{"name":"åŒ…ç®¡ç†å·¥å…·","slug":"åŒ…ç®¡ç†å·¥å…·","permalink":"https://lookupman.cn/tags/%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/"}]}